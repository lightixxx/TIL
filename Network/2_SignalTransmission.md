# 신호의 전송과 충돌

## 1계층의 역할과 개요

### 전기.기계적인 전송

1계층의 순서는 송신측에서는 마지막으로 수행하고, 수신측에서는 가장 먼저 수행되는 계층이다. 통신매체에 데이터를 보내는 것과 그 데이터가 지나가는 것에 대한 순서와 규칙이 1계층이 하는 일이다. 통신 매체란 케이블을 말하는데, 이 케이블에 대한 규칙도 1계층에서 정해져 있다. 컴퓨터같은 기기끼리 연결하는 '케이블'과 데이터인 '신호'이 두 가지가 1계층의 범위에 속한다. 즉, **케이블이 연결되어 있는 기기에 신호를 전달하는 것이 1계층의 역할**이고, 이것을 위한 몇 가지의 '규격'과 '규칙'이 정해져 있다.

1계층의 역할을 통해서 수신처에 데이터를 전달할 수 있게 되는 것이다. 반면 2계층부터 상위 계층은 '데이터를 보내기 전에 어떤 것을 할지', '데이터가 도달한 뒤에 어떤 것을 할지'를 결정하게 된다.

### 통신 매체

기기와 기기 사이를 연결해서 **신호가 지나는 '파이프'역할을 하는 것이 통신 매체**이다. 이 통신 매체는 크게 '유선'과 '무선'으로 나눠진다. 유선을 사용하는 것이 일반적인 방식이다. 유선은 케이블을 사용해 신호를 보냄으로써 수신처까지 데이터가 도달하는 방식인데, 이 케이블에는 **전기신호를 사용하는 동선과 광신호를 사용하는 광파이버**가 있다. 둘 다 많이 사용되지만 일반 가정이나 기업에서 보는 것은 동선케이블이다. 동선케이블이라도 **현재 사용되고 있는 것은 UTP(Unshielded Twist Pair cable)**이다. **UTP는 두 개가 한 쌍인 동선 네 쌍으로 이루어져 있는데**, 이 UTP가 현재 일반적으로 LAN에서 사용되는 케이블이다. 광파이버 케이블도 옛날에 비하면 보급되기 시작했지만 아직은 UTP쪽이 압도적으로 많다. UTP가 사용하기 훨씬 편리하기 때문이다. 광파이버는 신호의 안정과 통신속도에서는 뛰어나지만 굽히기가 어려운 반면, UTP는 비교적 굽히기 쉬운 편이라 좁은 곳에 배선하기가 수월하다.

이 케이블에 신호를 보냄으로써 데이터가 전달되는데, 케이블에 신호를 보내고 받는 기계가 인터페이스이다. 네트워크에 사용되는 기기는 사용할 케이블과 케이블에서 사용할 신호에 맞춘 인터페이스가 필요하다. 컴퓨터가 보내고 싶은 데이터를 케이블에 맞는 신호로 변환해서 케이블로 보내고, 케이블에서 보내온 신호를 컴퓨터에서 사용하는 데이터로 변환하는 것이 인터페이스의 역할이다. 컴퓨터에서 사용되는 인터페이스로는 LAN용 케이블에 접속하기 위한 **NIC(Network Interface Card)** 가 일반적이다. 최근의 가정용 PC는 대부분 처음부터 이 NIC가 부착되어 있어서 별도로 붙이는 경우는 거의 없고, WAN의 경우 통상적으로 PC에는 NIC를 부착하지 않고 **DCE(Data Circuit terminating Equipment: 회선종단기기)** 라는 별도의 신호 변환기를 사용한다. LAN의 경우에는 PC에 달려 있는 인터페이스 NIC에서 송신하는 것이고, WAN의 경우는 PC의 인터페이스에서 DCE로 신호를 보내면 DCE가 WAN의 케이블에 맞는 신호로 다시 변환하는 것이다.

> - 1계층의 역할은 케이블이 연결되어 있는 기기에 신호를 전달하는 것이다.
> - 1계층의 역할에 의해 상대에게 데이터가 전달된다.
> - 통신 매체는 유선과 무선이 있고 유선에는 동선 UTP와 광파이버가 있다.

<br />

## 신호와 충돌

### 신호

컴퓨터와 통신 매체를 중개하는 **인터페이스는 비트를 신호로, 신호를 비트로 변환하는 기기**라고 한다. 신호에는 **아날로그 신호와 디지털 신호**가 있다. 아날로그는 '파장', 디지털은'ON과 OFF'로 생각하면 이해하기 쉬운데, 현재 통신에서 사용되는 것은 압도적으로 디지털 신호가 많다. 비트는 '0'이나 '1'로 표현되는데 반면 디지털 신호는 'ON'이나 'OFF'이다. 예를 들어 '0'을 'OFF', '1'을 'ON'이라고 하면 신호 하나로 비트 하나가 되는 것이다. 그래서 비트는 표현하기 쉬운 디지털 신호로 사용되고 있다.

신호의 형태와 전송방법에 따라 **통신속도**가 결정되는 것이다. 통신속도는 일반적으로 **1초 동안 전해지는 비트 수**로 표현되는 경우가 많은데, 단위로 사용되는 것이 **bps(bit per second)** 이다. 예를 들어 인터넷 회선의 스피드가 40메가(10의 6승)이면 40,000,000bps가 되는 것이다. 통신 속도는 신호 한 번에 1초 걸린다고 하면 1초 동안에 1비트 밖에 표현하지 못한다. 그런데 1초에 신호 2번이라면 2비트를 표현할 수 있다. 한 번의 신호로 '0','1' 뿐만 아니라 '00', '01'을 표현할 수 있게 되면 한 번의 신호로 2배인 2비트를 표현할 수 있게 되는 것이다. 한 개의 신호를 되도록 짧게, 또 한 개의 신호로 되도록 많이 표현할 수 있게되면 통신속도는 매우 좋아지겠지만 한계가 있다. 신호가 너무 짧아진다거나 신호 하나로 너무 많은 것을 표현하면 수신자 쪽에서 바르게 식별하지 못할 수도 있고, 신호에 문제가 발생할 수도 있다.

### 신호에 발생하는 문제

신호에 발생하는 문제는 크게 3가지 정도가 있다. 첫째로 **신호의 감쇠**다. 동선에 전기신호를 보내는데 동선에는 저항이 있기 때문에 **긴 케이블을 지나는 동안 신호가 약해지는데** 그렇게 되면 신호의 진폭이 약해져서 못 읽을 수 있다. 그래서 장거리로 운반하는 경우에는 도중에 '약해진 신호를 본래 상태로 되돌리기'위한 '증폭'이라는 처리를 하는 기계를 중간에 설치한다.

두 번째 문제는 **노이즈.간섭**이다. 전기 신호가 어떤 원인에 의해 형태가 무너져버리는데, 그렇게 되면 신호의 진폭을 정확하게 읽을 수 없게 될 가능성이 있다. 예를 들어, 근처에 큰 전원이 있다거나 고온 물체가 옆에 있다거나(열 잡음), 바로 가까이에 신호를 보내는 또 다른 케이블이 있다거나(크로스 토크: 신호누설), 번개나 무선 등 전자파가 발생하는 있다거나 등 이런 노이즈나 간섭의 원인으로부터 케이블을 멀리 두거나 케이블에 특수 가공을 해서 신호가 망가지는 것을 막을 필요가 있다. 이때 사용되는 노이즈 방지 케이블은 케이블에 실드라는 처리를 해서 간섭이나 노이즈를 막는 것이다. 하지만 광파이버에서 사용하는 광신호는 이들 노이즈나 간섭을 받지 않는다. 이런 노이즈나 간섭은 전기적인 요인에서 오는 거라서 빛에 영향을 주지 않기 때문이다.

마지막 문제는 **충돌**인데, 충돌은 말티액세스 네트워크 등에서 일어나는 문제이다. 여기서 일어날 수 있는 문제는 **신호가 보내지고 있는 도중에 다른 신호를 보내는 경우에 발생**한다. A라는 컴퓨터가 신호를 보내고 있을 때 다른 B라는 컴퓨터가 또 다른 신호를 보내는 것이 **충돌(Collision)** 이라고 불리는 현상인데 이 현상이 일어나면 전기신호가 뒤섞여서 신호의 진폭이 붕괴되는 것이다. 이 현상을 막는 방법은 두 가지인데 '신호를 보내는 타이밍을 서로 엇갈리게 하는 방법'과 '신호가 지나는 길을 나누는 방법'이다. 둘 다 2계층과 관련이 있다.

> - 비트를 신호로 바꾸어 케이블에 보냄으로써 상대에게 전한다.
> - 신호의 형태나 전송 방법에 의해 통신속도가 정해진다.
> - 신호는 감쇠, 노이즈.간섭, 충돌 등의 문제가 발생한다.

<br />

## 허브

### 허브의 기능

**허브에 케이블로 연결되어 있는 기기는 동일 케이블에 연결되어 있는 것하고 같은 취급**을 받게된다. 허브의 케이블 삽입구는 포트라고 하는데, 포트의 수는 제품에 따라 4, 6, 8, 16, 32개 등이 있다. 즉, 4개의 포트가 있는 허브라면 4대의 기기를 연결할 수 있기 때문에 케이블을 잘라서 T자 분배기를 넣는 것보다 간단하다.

허브의 첫 번째 기능은 **신호의 증폭과 재생**이다. 허브는 **감쇠에 의해 붕괴된 신호를 본래의 형태로 증폭.재생** 한다. 감쇠로 약해져서 붕괴된 신호가 본래로 돌아오기 때문에 다시 멀리까지 도달하게 될 수 있도록 허브가 그 증폭의 역할을 한다. 증폭만 하는 기계로 **리피터(Reapeater)** 라는 것이 있는데, 리피터는 케이블 사이에 연결하는 기계로 허브처럼 케이블을 많이 연결할 수는 없다. 그래서 일반적으로 케이블을 많이 연결할 수 있는 허브를 사용하는 것이다.

허브의 또 하나의 기능은 **복수의 기기를 연결해서 네트워크를 구축**하는 것이다. 허브에 케이블을 연결함으로써 하나의 케이블에 연결되어 있는 것 과 동일한 취급을 받게 되기 때문에 **허브에 연결되어 있는 기기끼리 신호를 주고받을 수 있게 되는 것**이다. 예를 들어 포트가 32개인 허브가 있는데 컴퓨터가 33대라면 허브와 허브를 연결하는 접속을 하는 것이다. 이것은 연속 접속(cascade connection)이라고 한다. 허브에 연결함으로써 케이블 한 개에 연결되는 것과 같은 취급을 하게 되니까 거기에 다시 허브를 연결하면 그것도 같은 케이블로 연결되는 것이 되는 것이다. 이렇게 허브를 연속 접속해서 큰 네트워크를 만들 수 있게 되는 것이다.

### 충돌 도메인

허브를 중심으로 복수의 컴퓨터가 연결되서 네트워크가 형성되는 건데 여기엔 문제가 있다. **허브는 수신한 신호에 대해 어떤 제어도 하지 않는다**는 점이다. 신호를 증폭하고 재생은 하지만 그 외에는 안한다는 것이다. 허브는 **수신한 포트 이외의 모든 포트에 수신한 신호를 송신**하는데, 이것이 **플러딩(flooding)** 이라는 것이다. 충돌을 생각해보면 허브는 하나의 케이블에 T자 분배기를 넣은 것 같은 개념이기 때문에 **허브에 연결되어 있는 기기가 신호를 보내면 충돌이 일어날 가능성**이 있다는 것이다. 같은 허브에 연결되어 있는 2대의 컴퓨터가 동시에 신호를 보내면 둘 다 같은 케이블에 연결되어 있는 것과 마찬가지이기 때문에 어딘가에 신호가 부딪히게 된다.

이처럼 신호를 송신하면 충돌이 발생할지도 모르는 범위를 **충돌 도메인(Collision Domain)** 이라고 한다. 이 충돌 도메인 내에 있는 컴퓨터가 신호를 송신하면 어딘가에서 충돌이 발생할 가능성이 생기는 것이다. 그래서 **허브로 연결되어 있는 컴퓨터는 같은 충돌 도메인에 있게** 되는 것이다. 충돌이 발생하면 신호가 섞여서 이상해지거나 수신측에서 제대로 읽을 수 없게 된다. 그래서 **충돌을 막아야만 하는데**, 충돌 도메인 내에 컴퓨터가 많으면 '우연히 같은 타이밍'으로 신호를 보낼 가능성이 증가하기 때문에 충돌 가능성도 높아지게 된다. '우연히 같은 타이밍'으로 신호를 보낼 가능성을 줄이기 위해서는 **충돌 도메인은 작아야만 한다**. '충돌 도메인의 범위가 작다'는 것은 '충돌 도메인 내의 컴퓨터 수가 적다'는 것이다. 따라서 '충돌 도메인을 작게할 필요'가 있기 때문에 스위치가 그 일을 하게 된다.

> - 허브는 신호의 증폭과 재생을 수행하고 다수의 컴퓨터를 연결한다.
> - 허브는 신호의 증폭과 재생 이외의 제어는 하지 않으며 플러딩을 한다.
> - 충돌 도메인은 작아야 한다.

<br />

## 2계층의 역할과 개요

### 2계층의 개요

1계층은 '케이블이 연결되어 있는 기기에 대한 신호 전달'을 수행하는 계층으로써 실제 '데이터 전달'을 담당한다. 송신한 컴퓨터가 '보내고 싶은 상대'가 1대라도 허브에 연결만 되면 누구에게든 상관없이 도달하게 된다. 따라서 '1대에만 도달'하도록 하는 방법을 생각할 필요가 있다. 또한 여러 대의 컴퓨터가 허브에 연결되어 있으면 '우연히 동시에 송신'한 경우에 신호 충돌이 일어나기 때문이다. 충돌을 막기 위해 '송신하는 타이밍을 엇갈리게 하는 방법'을 생각해야 하는데 이것은 '신호를 보내기 전'에 해당된다. '신호가 도달한 후'에도 고려해야 할 것이 많기 때문에 **신호의 송신 전이나 수신 후에 바르게 데이터를 송수신하는 순서**가 필요한 것이다.

2계층에서는 **신호가 닿는 범위에서의 데이터 전송에 관한 규정**을 생각해야 한다. 신호가 닿는 범위는 멀티액세스 네트워크라면 허브로 연결되어 있는 기기 전체, 포인트 투 포인트 네트워크라면 서로 연결되어 있는 두 대가 그 범위가 된다. 이것이 **세그먼트 범위에서의 데이터 전송**을 말하는 것이다. 세그먼트를 넘는다는 것은 패킷 교환기 패킷 교환기인 라우터를 통해서 별도의 세그먼트로 데이터를 보낸다는 의미이다. 이것은 2계층보다 상위 계층인 3계층에 해당된다.

### 프레이밍과 신호의 동기

1계층에서는 신호를 전달하는 것을 생각하고, 2계층에서는 그 신호가 닿는 범위 즉 세그먼트의 범위에서 '데이터를 어떻게 송수신할지'를 생각하는 건데, **1계층에서 다루는 신호랑 케이블 등에 따라 2계층의 규격이 달라지게 된다**. 2계층에서는 1계층에서 사용되고 있는 케이블이나 신호에 따라 사용하는 규칙이 다르다. 이 규칙은 몇 가지가 있지만 간단히 분류하면 **LAN용과 WAN용**이 있다. **3계층 이상의 계층에서는 LAN이나 WAN이나 동일한 규칙을 사용**한다. 사용하는 케이블에 따라 사용하는 규칙이 다른 것은 2계층까지이다.

**LAN의 사실표준인 이더넷(Ethernet)** 이라는 규칙이 있는데, 2계층에서는 '세그먼트 내에서의 데이터 전송'에 관한 순서가 정해져 있다. 여기서 시행되는 것은 몇 가지가 있는데 먼저 프레이밍(Framing)이 있다. 프레이밍은 1계층에서 주고받는 신호를 비트화해 거기에 의미를 갖게 하는 것을 말한다. 프레임은 2계층의 PDU인데, 프레이밍을 시행함으로써 송수신되는 신호를 '데이터'로 인식할 수 있게 된다. 예를 들면, 프레이밍에서 제일 먼저 프리엠블(preamble)이라고 불리는 '지금부터 프레임이 시작된다는 신호'를 한다. 그리고 수신측에서는 이 프리엠블을 수신하면 '이제부터 프레임 신호가 오겠군'하고 판단하게 된다. 비트를 신호화할 때 '1비트분의 신호의 폭'을 정했는데, 이것을 제대로 다루기 위해서는 '비트를 읽는 타이밍'이 송식측과 수신측 양쪽에서 일치해야 한다.

타이밍을 맞추는 방법으로는 데이터를 송수신하지 않는 상태에서도 클락(Clock) 신호라고 부르는 '타이밍을 맞추는 신호'를 계속해서 보내는 방법이 있다. 이 방식은 **동기 통신**이라고 부르는데, 이 방식에서는 프리엠블은 사용하지 않는다. 다만 항상 신호를 보내는 수고가 필요하기 때문에 별로 사용되지는 않는다.

프리엠블을 사용하는 방법으로는 프리엠블을 보냄으로써 '이제부터 데이터가 시작된다'는 것을 알게 되기 때문에 '비트를 읽을 타이밍'을 이 프리엠블에 맞추는 것이다. 이더넷의 경우 '1'과 '0'을 교대로 프리엠블로 보내는데 이것을 읽고 수신측에서는 비트를 읽는 타이밍을 맞추는 것이다. 항상 신호를 보내는 것이 아니라 프리엠블을 사용해서 타이밍을 맞추게 된다. 패킷을 사용한 패킷 교환 방식에서는 프리엠블 방식이 일반적이다.

> - 2계층은 신호가 도달하는 범위에서의 데이터의 송수신을 생각한다.
> - 2계층에서는 WAN과 LAN의 규칙이 다르다.
> - LAN에서는 '이더넷'이 사실표준이다.

<br />

## 2계층 주소와 이더넷

### 주소와 캐스트

2계층은 '세그먼트'라는 범위에서 어떻게 데이터를 송수신할지 생각하는 계층이다. 2계층에서는 그 범위의 송수신에 관한 규칙이 정해져 있다. LAN의 2계층에서는 이더넷이 사실표준의 규칙이다. 이더넷에서 어떻게 '신호가 도달하는 범위에서 데이터를 송수신하는지'에 대해 알기 위해서 먼저 기억해 둘 것은 **주소(Address)** 이다. 그리고 이 주소를 어떻게 사용할지 어떻게 배정할지 같은 것을 **어드레싱(Addressing)** 이라고 한다.

여기서 주소란 **데이터를 보내는 상대와 자신을 특정하는 데이터**를 말한다. 데이터 통신은 데이터를 보내고 상대방에게서도 데이터가 오는 것이 일반적인데, 따라서 이쪽 주소도 가르쳐 줄 필요가 있기 때문에 반드시 '수신처'와 '송신처'의 주소를 알려줘야 한다. 이 주소는 **데이터 전송 방법에 따라 3종류(애니캐스트라는 한 종류가 더 있지만 생략)가 있다**. **유니캐스트(Unicast), 브로드캐스트(Broadcast), 멀티캐스트(Multicast)** 라는 3종류의 전송 방법인데 이들은 각각 유니캐스트 주소, 브로드캐스트 주소, 멀티캐스트 주소를 사용한다.

유니캐스트는 가장 일반적으로 사용되는 '1대1' 데이터 통신이다. 그 다음으로 많이 사용되는 것이 브로드캐스트이고 이건 '1대 전체'로 **전원, 즉 모두에게 메시지를 보내는 데이터 통신**이다. 2계층의 브로드캐스트는 '세그먼트내의 모든 기기'라는 의미가 된다. 마지막으로 멀티캐스트는 '1대 다수'로, 지정된 복수의 기기로 메시지를 보내는 데이터 통신을 말한다.

### MAC 주소

주소에서 가장 먼저 기억해야할 점은 **각각의 기기는 유니캐스트 주소를 적어도 한 개 갖고 있다**는 것이다. 이 각각의 기기가 가진 유니캐스트 주소를 수신처로 해서 다른 기기는 그 기기에 데이터를 송신하게 되는 것이다. 라우터처럼 복수의 인터페이스를 가진 기기는 **인터페이스마다 유니캐스트 주소를 갖기**때문에 2개 이상의 주소를 가질 수도 있다. 또한 같은 유니캐스트 주소를 가진 기기가 여러 개 있는 경우에는 수신처를 특정지을 수 없기 때문에 **유니캐스트 주소는 유일(같은 것이 없다)하다**.

반면 멀티캐스트 주소는 '그룹 번호'같이 취급하기 때문에 같은 주소를 가진 기기가 여러 개 있어도 된다. 멀티캐스트에 보내고 싶은 경우에는 수신처를 그룹으로 하면 그 그룹에 속한 기기가 수신을 하기 때문이다. 멀티캐스트 그룹에 속해 있는 기기는 '유니캐스트 주소'와 '멀티캐스트 주소' 2개를 갖게 되는 것이다. 그리고 브로드캐스트 주소는 '전체 수신'이 되기 때문에 이 주소로 보낸 데이터는 모든 기기가 무조건 송신을 해야만 하는 것이다. 예를 들어 수신처가 '라이틱스'인 것은 유니캐스트로 라이틱스가 수신을 하는 것이고, '라이틱스 집에 있는 분'인 것은 멀티캐스트로 라이틱스의 가족이 수신을 하는 것이고, '모두'인 것은 브로드캐스트로 전체가 수신한다는 얘기이다.

이더넷에서 사용되는 주소는 **MAC 주소(Media Access Control Address)** 라고 불리는 주소로 이 주소는 **인터페이스에 지정된 고정 주소**이다. 인터페이스가 고장나서 다른 인터페이스로 교환하거나 하면 MAC 주소도 변경이 된다. 이 MAC 주소는 **48비트** 값으로 4비트마다 16진수로 고쳐서 쓴다. MAC 주소의 선두 24비트는 벤더코드라고 불리는 인터페이스를 제조한 메이커의 번호이고, 후반의 24비트는 제조한 메이커가 붙인 번호(벤더 할당 코드)이다. 즉 '어느 메이커가 만든', '몇 번째 인터페이스'라는 의미인 것이다.

> - 1대1인 유니캐스트, 1대 전체인 브로드캐스트, 1대 다수인 멀티캐스트가 있다.
> - 기기는 한 개 이상의 유니캐스트 주소를 가진다.
> - 이더넷에서는 MAC 주소가 사용된다.

<br />

## 이더넷

### 이더넷 프레임

LAN에서의 2계층은 **이더넷**이라는 규칙이 적용된다. 이더넷이 사용되는 주소, 어드레스는 MAC 주소로 벤더코드와 제조업체가 붙이 번호로 이루어진 '주소'로 이 주소를 이용해서 수신처와 송신처를 특정한다. 이 주소를 사용해서 '누구로부터', '어디로'를 결정하는데 이 주소 정보를 헤더에 기술해서 송신한다. 이더넷에서는 '이더넷 헤더'와 '이더넷 트레일러'가 어떤 제어 데이터인가는 다음 그림과 같다.

![Frame 4](https://user-images.githubusercontent.com/59480963/134131685-0b9912f8-90e4-49a2-9b7d-8014d1fc244c.jpg)

헤더에는 수신처의 주소, 송신처의 주소, 페이로드의 내용을 식별하는 타입이 붙고, 트레일러에는 신호가 전송되는 동안에 문제가 생겨서 정확하게 읽을 수 없게 되거나 '0'을 '1'로 또는 그 반대로 읽어버리는 경우에 그런 에러를 체크하기 위해 FCS를 붙이게 된다. 기본적으로 통신도중에는 에러를 고칠 수 없다(허밍부호라고 불리는 에러 체크 코드를 붙이면 고칠 수 있지만 복수의 비트가 에러인 경우에는 허밍부호로도 불가능). 왜냐하면 '바른 데이터'인지 아닌지는 에러가 발생하지 않은 데이터를 수신하지 않는 한 알 수 없기 때문이다. FCS는 에러가 발생했는지 아닌지는 알지만 어느 상태가 올바른 상태인지까지는 알지 못한다. 따라서 **에러가 있었던 프레임은 파기가 된다**. 그 시점에서 버려지고 그 이후의 처리는 하지 않게 되고, **파기했다는 것은 송신측에는 알리지 않는다**.

### 이더넷 동작

LAN에서는 허브를 사용한 멀티액세스 네트워크를 채용하는 경우가 많다. 허브를 사용한 경우 '허브는 수신한 포트 이외의 모든 포트를 통해 수신한 신호를 송신'하는 플러딩을 하고, 그래서 충돌이 일어난다. 여기서 중요한 것은 '플러딩에 의해 허브에 연결되어 있는 모든 기기에 신호가 도달한다.'와 '충돌이 발생한다.'는 것이다.

이 문제를 통해 이더넷을 설명하자면 먼저 '모든 기기에 도달'한다는 점이다. 허브를 사용한 멀티액세스 네트워크의 경우는 신호, 즉 데이터는 모든 기기에 도달하게 된다. 따라서 이더넷에서는 **수신한 프레임의 수신처 MAC 주소를 보고 자기에게 온 것 외의 다른 프레임을 파기**한다. 즉, '특정 수신처에만 도달'하는 것이 아니라, '자기가 수신처가 아닌 데이터는 안본다.'는 것이다. 수신처 주소가 아닌 컴퓨터는 수신을 하더라도 파기해서 내용을 보지 않도록 한다. 극단적으로 말하면 주소라는 것은 '수신처가 자기인지 아닌지'를 체크하기 위해 붙어있다고 할 수 있다. 멀티캐스트의 경우는 멀티캐스트 주소에 그룹의 번호가 들어 있기 때문에 자신이 그 그룹의 일원이라면 수신, 그 이외의 경우는 파기하는 것이고, 브로드캐스트는 전체 수신이기 때문에 반드시 수신을 하게 되는 것이다.

두 번째 포인트는 '충돌'이다. 이더넷에서는 '신호를 보내는 타이밍을 겹치지 않도록 비켜나가게' 함으로써 '되도록 충돌이 일어나지 않도록 하는데, 이를 위해서 **CSMA/CD(Carrier Sense Multiple Access/Collision Detection)** 라는 **액세스 제어**를 시행한다. 액세스 제어란 인터페이스에 연결되어 있는 케이블에 신호를 보내는 '액세스'를 '제어'하는 것을 의미한다. 이 CSMA/CD를 간단히 말하면 'CS(신호 감지)는 누군가가 송신 중이라면 송신하지 않는다.' 이고, 'MA(다중 액세스)는 아무도 송신하고 있지 않다면 송신할 수 있다.'이고, 'CD(충돌검사)는 송신 후에 충돌이 일어나면 다시 재수행한다.'라는 의미이다.

![Frame 5](https://user-images.githubusercontent.com/59480963/134670992-876af227-f4c2-49c4-a0db-65c0814714ae.jpg)

만약 2대가 거의 동시에 신호를 감지한 경우엔 송신 후에 충돌이 일어날 수 있다. 이 경우에는 2대 모두 '아무도 송신하고 있지 않다'고 판단해서 2대가 송신하게 되기 때문에 충돌이 발생하는데, 이것은 신호 감지로도 막을 수 없다. 따라서 '가능하면 충돌이 일어나지 않도록' 하는 것이다. 즉, 타이밍을 엇갈리게 하기는 하지만 어쩌다가 일치해 버리면 막을 수 없다는 것이다.

> - 이더넷에서는 수신처와 송신처의 MAC 주소, 에러 체크 등을 헤더, 트레일러로 붙인다.
> - 수신한 프레임의 수신처가 자기가 아닌 경우는 파기한다.
> - 되도록 충돌을 막기 위해 CSMA/CD를 사용한다.

<br />

## 스위치

### 허브와 스위치

이더넷의 CSMA/CD는 충돌을 '막는' 것이 아니라, '일어나기 어렵게'하는 것이다. 즉 이더넷의 CSMA/CD로 충돌이 없어지지는 않는다. 충돌 도메인은 '그 범위 내의 컴퓨터가 송신하면 다른 컴퓨터의 송신하고 충돌할 가능성이 있는' 범위인데, 이 범위 내의 컴퓨터의 수는 적어야 한다는 것이다. 충돌 도메인 내의 컴퓨터의 수가 많으면 CSMA/CD를 사용해도 결국 '2대의 컴퓨터가 동시에 송신할 가능성'이 높아진다. CSMA/CD를 떠올려 보면, 충돌이 발생하면 그 컴퓨터는 잠시 대기했다 재송신을 하기 때문에, 충돌 도메인 컴퓨터의 수가 많으면 송신 -> 충돌 -> 재송신 -> 충돌 ... 같은 일이 일어나서 **효율이 아주 나쁜 상태**가 된다. 그러면 제대로 데이터를 송신할 수 없게 되는 것이다.

충돌이 발생하지 않도록 하기 위해선 '신호를 보내는 타이밍이 겹치지 않도록 엇갈리게 하는 방법'과 '신호가 지나는 길을 나누는 방법'이 있다. 이 '신호가 지나는 길을 나누기'위한 기기가 이번에 설명하는 **스위치(Switch)** 이다. 이것을 **허브 대신에 사용**하는 것이다. 스위치도 허브와 마찬가지로 복수의 포트를 갖고 있다. 컴퓨터를 스위치에 연결함으로써 다른 컴퓨터와의 사이에서 신호를 송수신할 수 있게 되는 것이다. 허브를 그냥 스위치로 치환만 하면 된다. 스위치가 충돌을 막기위해 '어디에서 충돌이 일어나고 있는지'가 포인트가 된다. 현재 LAN에서 사용되고 있는 UTP나 광파이버 케이블은 '송신 신호'와 '수신 신호'가 나뉘어 있다. 즉, 케이블상에서는 자신이 송신한 신호랑 상대에게서 보내 온 신호가 동시에 지나가도 충돌은 발생하지 않는다는 것이다. **충돌은 허브에서 발생**하는 것이다. 허브가 동시에 2개 이상의 기기로부터 수신하면 허브는 그것을 나누어서 보낼 수가 없기 때문에 거기에서 충돌이 발생하는 것이다.

<br />
<br />
<br />

##### 출처

- [하루3분 네트워크 교실](http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&ejkGb=KOR&linkClass=&barcode=9788931454727)
