# 네트워크 기초 지식

## 네트워크란?

물류네트워크, 신경네트워크 등 네트워크란 웹에만 사용되는 용어가 아니라 Net(망) + Work(작업하다)의 합성어로 무언가(점)와 무언가(점)가 그물망처럼 무언가(선)에 의해 연결되어 있는 상태를 통상적으로 네트워크라고 한다.

네트워크의 핵심은 **연결**과 **주고받기** 이다. 네트워크는 **연결**을 통해서 '무언가를 상대에게 보내고', '상대로부터 무언가를 받기' 위해 존재하는 것이다.

<br />

> - '무언가와 무언가가 무언가에 의해 연결되어서 무언가를 주고받는 것'이 네트워크이다.
> - 네트워크라고 해도 컴퓨터 네트워크만 있는 것은 아니다.

<br />

## 네트워크의 장점

### 컴퓨터 네트워크란?

컴퓨터와 컴퓨터가 통신 매체를 통해 정보(Data)를 운반하는 것을 말한다.

### 네트워크를 사용하는 이유

물리적인 거리가 아니라 자기의 컴퓨터가 아닌 다른 컴퓨터에 연결을 통해서 메일이나 파일, 인쇄하고 싶은 정보(리소스)를 네트워크로 주고받을 수 있게된다. 다시 말해 복수의 컴퓨터에서 리소스를 공유할 수 있게 된다. 리소스를 공유함으로써 한 대의 컴퓨터로는 할 수 없었던 일이 가능해지고, 한 곳에 통합함으로써 효율적이 되는 것이다.

즉, **리소스를 유용하게 활용하기 위해 공유하는 것이 바로 네트워크의 장점**이다.

<br />

> - 컴퓨터 네트워크는 컴퓨터와 통신매체, 데이터로 이루어진다.
> - 리소스를 공유하는 것이 네트워크의 장점이다.
> - 데이터를 주고받음으로써 리소스를 공유한다.

<br />

## 데이터 통신 기초

리소스를 공유하기 위해서는 컴퓨터가 가진 리소스를 주고받을 필요가 있고, 그래서 이루어지는 것이 **데이터 통신**이다.

### 데이터란?

데이터란 무언가에 대한 **정보**를 컴퓨터상에서 표현한 것을 말한다. 여기서 말하는 **정보**란 리소스를 공유하기 위해 사용하는 정보를 말한다. 예를 들어, 파일이든 인쇄하는 내용이든 홈페이지 정보든 간에 이들 정보를 주고받음으로써 **리소스 공유**가 실현되는 것이다. 즉, **데이터란, 컴퓨터상에서의 리소스를 공유하기 위한 정보**를 말하는 것이다.

컴퓨터에서는 모든 정보는 **비트(Bit)**로 저장되고, 데이터를 주고받을 때도 비트를 사용하며, 다수의 비트를 사용해서 정보를 보존한다. 비트는 '0'이나 '1'인 상태를 유지할 수 있다. 비트가 하나, 즉 1비트면 '0' 또는 '1'의 정보를 저장할 수 있고, 2비트면 '00', '01', '10', '11'의 정보를 저장할 수 있는 것이다. 예를 들어 문자 'A'가 '00001', 'B'가 '00010' 이라는 식으로 기억하는 것이다. 이 비트로 만들어진 데이터를 다른 컴퓨터에 보내거나 받는 것이 **데이터 통신**이다.

### 데이터 통신

데이터를 가진 컴퓨터인 '주는 컴퓨터'와 '받아들이는 컴퓨터'를 연결하는 '통신 매체'가 필요하다. 여기서 '통신 매체'는 컴퓨터와 컴퓨터 그리고 그 둘을 연결해서 데이터가 지나는 파이프가 있다고 생각하면 쉽다. 컴퓨터에 파이프를 연결할 때 컴퓨터에 파이프 접속구가 필요한데, 이것을 **인터페이스(Interface)**라고 한다.

> 인터페이스: 2개의 서로 다른 시스템 사이에 존재하며 정보의 송수신을 중개하는 것.

이것들을 준비해서 데이터를 보내게 되는데, 그 전에 **데이터를 주고받기 위한 규칙**이 있다. 데이터는 비트로 표현되는데 예를 들어 '가'를 '000001', '나'를 '000010'으로 정해서 보낸다고 가정하면 받는 컴퓨터에서도 해당 정보를 알고있어야 한다. 때문에 데이터를 보내는 쪽과 받는 쪽이 사용되는 규칙을 정한 뒤에 데이터를 주고받아야 하는데, 이 규칙을 **프로토콜** 이라고 한다. 즉, **보내는 쪽하고 받는 쪽이 같은 프로토콜을 사용**해야 한다.

> 프로토콜 : 데이터 통신에서 데이터를 주고받기 위한 규칙이다. 통신에서 사용되는 규약으로 '통신규약'이라고 번역되는 경우가 많다.

송신측과 수신측의 규칙이 다르면 의도한 내용을 보낼 수 없기 때문에 통신규약이 필요한 것이다. 프로토콜을 데이터를 다루는 법 뿐만 아니라, 데이터를 주고받는 순서나 데이터 내용과 그 순서 등, 프로토콜은 데이터 통신에서 필요한 것을 결정하는 것이다.

<br />

> - 주고받는 정보는 비트로 표현된다.
> - 데이터를 주고받는 데이터 통신을 하기 위해서는 기기와 프로토콜이 필요하다.
> - 프로토콜이란 데이터 통신상에서의 규칙이다.

<br />

## 회선 교환과 패킷 교환

### 회선 교환

파이프를 통해 컴퓨터와 컴퓨터를 연결할 때, 1개의 파이프로는 1:1로 밖에 연결되지 않는다. 만약 컴퓨터가 10대면 파이프를 10개, 100대면 파이프를 100개를 연결해야 한다. 이처럼 파이프의 개수를 늘리면 다수의 컴퓨터와 연결할 수 있지만, 컴퓨터의 수가 많을 수록 파이프의 수도 너무 많아진다.

전화의 경우엔 **교환기**를 사용해서 적은 파이프로도 다수의 접속이 가능하도록 만든다. 각각의 전화기는 교환기에만 연결되고, 다른 상대방과 접속하고 싶은 경우에도 전화기는 같은 회선을 사용한다. 교환기와 교환기 사이의 회선을 교체해서 다른 상대와 접속한다. 이런 식으로 교환기를 사용해서 파이프를 교체해가는 방식을 **회선 교환** 이라고 한다.

### 패킷 교환

회선 교환, 즉 전화를 생각해보면 교환기가 '파이프'를 교체해서 상대와 접속하는 동안에는 다른 곳으로 전화를 걸 수도 받을 수도 없는 상태가 된다. 즉 통화중에는 전화기와 교환기, 교환기와 교환기 사이의 회선은 그 통신이 점유하게 되기 때문에 교환기 사이의 회선수가 많아야만 많은 수의 전화가 동시에 통화할 수 있게 된다. 다시 말해 동시 통화에 필요한 수 만큼 회선이 필요하게 된다. 하지만 다수의 컴퓨터가 자유롭게 정보를 송수신하려면 이 방법으로는 회선의 수가 너무 많아지기 때문에 나온 것이 **패킷 교환** 방식이다.

패킨 교환 방식은 송신하고 싶은 데이터를 일괄적으로 한번에 보내지 않고 여러개로 분할해서 송신하는 것이다. 이렇게 분할한 데이터를 '소포'라는 의미의 패킷(Packet)이라고 부른다. 소포처럼 묶음으로 보낸다는 의미라고 할 수 있다. 큰 데이터를 작게 나누어서 송신하기 때문에 패킷 1개를 보내는 시간이 짧아지게 되고, 그로 인해 그 패킷이 회선을 점유하는 시간이 짧아지는 것이다. 다시 말해 **복수의 컴퓨터가 회선을 공유**할 수 있게 된다.

데이터의 총량이 변하지 않지만, 계속해서 패킷이 점유하는 것이 아니라 패킷과 패킷 사이에 다른 패킷을 넣을 수 있는 것이 장점이다. 즉 서로 다른 복수의 패킷이 한 개의 회선을 사용할 수 있는 것이다. 따라서 '동시 통화 수 만큼 회선이 필요했던' 전화 회선과는 달리 **회선이 1개면 된다** 는 장점이 있다. 또한 회선 교환에서는 반드시 '회선이 연결되어 있는 곳'에 도달하지만, 패킷 교환에서는 **한 개의 회선에 복수의 컴퓨터가 연결**되어 있기 때문에 수신처를 각각의 패킷에 붙이게 된다.

교환기의 역할은 '회선을 교체해서 연결'하는 것이다. 반면 패킷 교환기는 수신처가 연결되어 있는 회선을 골라서 거기로 패킷을 송출하는 역할과 사용하려고 한 회선이 사용중일 경우 일시적으로 저장했다가 회선이 비는 것을 기다리는 역할을 하는 것이다. 때문에 컴퓨터에 의한 데이터 통신에서는 복수의 컴퓨터가 동시에 사용할 수 있는 이 패킷 교환방식이 편리하기 때문에 **컴퓨터 네트워크는 패킷 교환 방식**을 사용하는 것이다.

그렇다고 회선 교환보다 패킷 교환이 뛰어나다고 할 수는 없다. 왜냐하면, 회선 교환은 연결되어 있는 동안에는 확실하게 수신처에 도달하고 회선을 점유할 수 있는데, 패킷 교환 방식은 패킷마다 따로따로 송신하기 때문에 반드시 송신한 순서대로 수신처에 도달한다고 할 수 없고, 도착하는 시간이 불규칙할 수 있기 때문이다.

<br />

> - 데이터 통신에는 회선 교환과 패킷 교환이 있다.
> - 회선 교환은 '파이프'를 교체하는 방식이다.
> - 패킷 교환 '패킷'으로 분할해서 송신하는 방식이다.
> - 컴퓨터 네트워크는 패킷 교환 방식이다.

<br />

## 네트워크의 구조

### 통신에 필요한 기기

패킷 교환 네트워크에서 필요한 기기는 먼저 데이터를 작성해서 송신하고, 또 데이터를 수신해서 사용하는 컴퓨터가 필요하다. 또한 네트워크 연결에 필요한 '파이프' 역할을 하는 통신매체, 파이프와 컴퓨터를 연결하는 인터페이스가 필요하다. 여기에 패킷 교환에 사용되는 패킷 교환기가 필요한데, 실제 네트워크에서는 **라우터(Router)**라는 기기가 패킷 교환기 역할을 한다.

### 멀티액세스 네트워크와 포인트 투 포인트 네트워크

컴퓨터에서 라우터, 라우터에서 라우터, 라우터에서 컴퓨터라는 식으로 연결된다면 컴퓨터가 3대면 라우터도 3대여야 한다. 하지만 실제론 파이프를 T자로 회선을 분배시키기 때문에 데이터는 분배기를 지나 수신측 컴퓨터에 도달하게 된다. 이렇게 패킷 교환없이 **케이블 분배기로 연결되는 범위를 세그먼트(Segment)** 라고 한다. 이 세그먼트 범위 내에 있는 컴퓨터는 패킷 교환없이 직접 데이터를 송수신할 수 있다.

케이블에 T자 분배기를 끼우는 작업이 번거롭기 때문에 요즘엔 **허브(Hub)**를 사용한다. 이 허브를 사용한 네트워크에서는 컴퓨터 한 대가 세그먼트 내의 어떤 컴퓨터에도 자유롭게 데이터를 송신할 수 있게 된다. 이런 네트워크 구조를 **멀티엑세스 네트워크**라고 한다. 엑세스란 컴퓨터가 다른 컴퓨터에 데이터를 송신할 수 있다는 의미이다. 복수의 컴퓨터에 의한 데이터 송수신이 가능하다는 의미에서 '멀티엑세스 네트워크'라고 한다.

이와 반대로 컴퓨터 한 대가 다른 한 대의 컴퓨터에만 데이터를 보내는 방식을 **포인트 투 포인트 네트워크**라고 한다. 고정된 수신처에 접속된 회선(전용선)을 사용하면 고정된 컴퓨터에만 데이터를 보내게 된다. 네트워크 구조의 종류에서는 다른 종류도 있긴 하지만 기본적으로 이 두 가지로 분류되는데, 이 두 종류를 조합해서 **패킷 교환 네트워크**가 만들어지는 것이다.

<br />

> - 패킷 교환 네트워크는 컴퓨터, 통신 매체, 인터페이스, 라우터로 이루어진다.
> - 네트워크에는 멀티액세스 네트워크와 포인트 투 포인트 네트워크의 두 종류가 있다.
> - 이 두 종류가 조합되어 네트워크 전체가 구성된다.

<br />

## LAN과 WAN

### 네트워크의 범위

네트워크를 구조면에서 분리한 것이 멀티액세스 네트워크와 포인트 투 포인트 네트워크가 있다면, '네트워크의 범위나 규모'로 네트워크를 분류하는 것도 있다.

**LAN(Local Area Network)** 은 좁은 범위의 네트워크이다. 좀 더 구체적으로 말하면 구내에 설치된 네트워크이다. 가정, 사무실, 빌딩 등을 범위로 해서 사용하는 네트워크를 LAN이라고 한다. 예를 들면, 회사의 직원들의 PC와 서버의 네트워크가 LAN이다. LAN은 기본적으로 사용하는 쪽에서 책임지고 케이블 설치랑 라우터 배치 등을 해서 네트워크를 만들어간다.

다시 말해 자신들이 사용하는 빌딩이나 방 같은 것을 LAN으로 해서 네트워크를 만드는 것이다. 따라서 빌딩 안에 있는 컴퓨터 끼리 데이터 통신이 가능하게 되는 것이다.

네트워크의 목적인 '리소스의 공유'는 공유되는 소스가 많을수록 효율이 올라가는데, 예를 들어 이 건물과 다른 건물이 네트워크로 연결되면 자료같은 것을 서로 주고받을 수 있기 때문에 더욱 편리해진다. 하지만 '자기 책임'으로 케이블을 다른 건물을 연결하는 것은 불가능하다. 때문에 나라에서 허가를 받은 회사라면 공공장소에 케이블을 설치할 수 있고, 이런 회사들(SKT, KT, LG 등) 중에서 통신용 케이블을 설치하는 회사를 통신사업자라고 한다. 건물과 건물사이에 연결되어 있는 케이블을 빌려서 거기로 데이터를 송신하는 시스템이다.

'데이터 통신 서비스'를 제공하는 통신사업자에게 그들이 보유하고 있는 케이블에 데이터를 전송할 권리를 구입해서 네트워크를 구축하는 것이다. 이런 네트워크가 **WAN(Wide Area Network)** 이다.

WAN은 LAN에서는 취급할 수 없는 범위, 즉 도시나 지역, 경우에 따라서는 국가 간을 가로지르는 네트워크를 만들 수도 있다. 다시 말해 **떨어져 있는 지역의 LAN끼리 통신사업자의 통신 케이블을 빌려서 연결한 네트워크** 가 WAN인 것이다.

The Internet 또는 The Net이라고 불리는 '인터넷'은 세계적 규모의 WAN의 대표라고 할 수 있다. 전 세계의 LAN, 그 LAN을 연결한 WAN, 그 WAN을 연결한 최대 규모의 네트워크가 인터넷인 것이다.

|             | LAN        | WAN                  |
| ----------- | ---------- | -------------------- |
| 범위        | 좁다(구내) | 넓다(지역.국가 규모) |
| 케이블 설치 | 자비       | 통신사업자           |
| 사용요금    | 무료       | 유료                 |
| 통신속도    | 고속       | 저속                 |
| 에러 발생률 | 낮다       | 높다                 |

단 WAN의 통신속도나 에러 발생률은 통신사업자와의 계약에 따라 다르다.

<br />

> - 자신의 책임으로 좁은 범위에서 만드는 것이 LAN이다.
> - 넓은 범위에서 통신사업자로부터 케이블을 빌려서 만들어진 것이 WAN이다.
> - 세계 최대 규모의 WAN은 인터넷이다.

<br />

## OSI 참조 모델

### OSI 참조 모델이란?

'데이터를 송수신하기 위한 규칙', 다시 말해 프로토콜은 먼저 최초 단계인 1960~70년대에는 각 업체가 자신들의 컴퓨터끼리 네트워크를 사용해서 데이터 통신을 할 수 있도록 컴퓨터와 통신에서 사용하는 기기, 그리고 프로토콜을 자신들의 규격으로 만들었다. 그래서 다른 회사와는 규격이 달라서 호환되지 않는 경우가 많았다. 사용하는 기기를 전부 같은회사 제품으로 통일시켜야하는 불편함을 겪고 있을 떄, 데이터 통신의 규격과 프로토콜을 통일하려고 했던 단체가 ISO이다. 이런 규격 통일을 표준화(Standardization)라고 하는데 결국 실패로 돌아갔다.

ISO의 표준화 단계에서 선언한 것이 **OSI 참조 모델(Open System Interconnection Reference Model)** 이라는 것인데, **데이터 통신의 단계 구성도** 이다. 데이터 통신 전체를 표준화하기 위해서 먼저 데이터 통신 전체의 설계도를 만들려고 한 것이다. 간단히 말하면 **데이터 통신을 단계로 나누어 각 단계의 순서를 명확히 하고, 이 모델에 따라 프로토콜을 정의**해서 데이터 통신을 구축하려고 한 것이다.

결국 실패했지만, 이 '데이터 통신의 단계와 순서'의 설계도인 'OSI 참조 모델'은 데이터 통신을 설명하는 데 아주 유용하다. '편지 주고받기'를 예로 들어 '내용', '표현', '전달물', '전달'로 나누어서 각각 규칙을 정하는 것이다. '통신 규칙'이라고 하면 처음부터 끝까지 전부 한꺼번에 생각하는 것이 아니라, 통신을 단계로 나눈다는 발상이 필요하다는 것이다. 그렇지 않으면 '편지를 편지지에 쓰는 것'하고 '우체국에서 분류하는 것'같이 완전히 다른 작업을 같은 레벨로 봐야하는 경우가 생기기 때문이다.

### OSI 참조 모델

OSI 참조 모델은 **데이터 통신을 7개의 단계**로 나누는데 이 단계를 **계층(Layer)** 이라고 부른다.

|         |                |                                             |          |
| ------- | -------------- | ------------------------------------------- | -------- |
| 제7계층 | 응용계층       | 사용자에게 네트워크 서비스를 제공한다.      | 내용표현 |
| 제6계층 | 표현계층       | 데이터의 형식을 결정한다.                   | 내용표현 |
| 제5계층 | 세션계층       | 데이터의 송수신의 순서 등을 관리한다.       | 내용표현 |
| 제4계층 | 전송계층       | 신뢰성이 높은(에러가 적은) 전송을 시행한다. | 전송물   |
| 제3계층 | 네트워크계층   | 전송 규칙과 수신처를 결정한다.              | 전송물   |
| 제2계층 | 데이터링크계층 | 인접기기 사이의 데이터 전송을 제어한다.     | 전송     |
| 제1계층 | 물리계층       | 전기.기계적인 부분의 전송을 시행한다.       | 전송     |

**각 계층마다 각각의 역할과 규칙**이 있다. 우편을 예로 들자면 '편지지 계층'에는 '편지지의 역할'과 '편지지의 규칙'이 있다는 얘기가 되는 것이다. '편지지 계층'에는 '전하고 싶은 내용을 기술'하는 역할과 '지정된 언어와 그림을 사용해서 봉투와 맞는 크기의 종이를 사용'하는 규칙이 있는 것과 마찬가지이다.

다시 말해, 네트워크에 의한 데이터 통신은 **단계마다의 복수의 프로토콜로 실현**되는 것이다. 따라서 OSI 참조 모델은 '단계와 순서의 설계도'라고 하는 것이다. 데이터 통신을 할 때는 7계층에서 1계층으로, 각각의 순서를 단계적으로 수행함으로써 데이터 통신이 가능해지는 것이다. 반대로 데이터를 수신하는 측에서는 1계층부터 7계층까지 순서대로 각 역할을 수행함으로써 데이터를 수신할 수 있게 되는 것이다.

OSI 참조 모델이라는 설계도를 따라서 프로토콜이 만들어지는데 이것의 장점은 **계층이 각각 독립**해 있다는 것이다. 데이터 통신에서 '데이터 형식'을 생각하고 싶을 땐 6계층의 순서랑 프로토콜만 생각하면 되기 때문이다. 우편이라면 '편지지'를 생각할 때는 '우편배달원'은 생각할 필요가 없다는 것과 같은 것이다. 즉, **어떤 계층의 프로토콜 변경은 다른 계층에 영향을 끼치지 않는다**는 것이다. 그리고 기본적으로 **하위 계층은 상위 계층을 위해서 일하고 상위 계층은 하위 계층에 관여하지 않는다**. '우편배달원'을 생각하면서 '편지지'를 고르는 것이 아닌 것과 같다.

> - 데이터 통신은 OSI 참조 모델에 의한 '단계와 순서'로 이해한다.
> - OSI 참조 모델은 7개의 계층(Layer)로 나위어 있으며 각각은 독립해 있다.
> - 하위 계층은 상위 계층을 위해 일하고 상위 계층은 하위 계층에 대해 관여하지 않는다.

<br />

## 캡슐화

### 순서의 흐름

OSI 참조 모델이 계층별로 나뉘어져 있고, 송신측은 7계층에서 1계층으로, 수신측은 1계층에서 7계층의 순서대로 수행한다. 이 순서의 흐름을 '데이터'에 착안해서 택배를 예로 들어 설명해보면 물건을 가지러 온 시점에서 택배원이 수취인이 누구고 배달처가 어디인지 같은 내용을 택배 송장에 적는다. 필요에 따라 완충재를 넣을 수도 있다. 그럼 **수취인은 반대의 순서**로 '택배 송장'을 뜯고 '상자에서 꺼낸 뒤', '완충재를 벗기면' 물건을 받게 되는 것이다.

이처럼 데이터 통신도 마찬가지로 **데이터를 운반하기 위해서는 운반하고 싶은 것(데이터) 이외에 다른 것도 필요**하다는 것이다. 수신처, 송신처의 주소(네트워크상에서 컴퓨터의 주소), 데이터 통신을 제어하기 위한 데이터 등이 필요하게 되는 것이다. 패킷 교환 방식에서는 각각의 패킷에 수신처를 붙이는데, 그것 말고도 각각의 프로토콜에서 필요한 정보를 덧붙여가야 한다. 데이터 말고도 이런 **주소같은 것들을 데이터랑 함께 보내**는 것이다. 이렇게 데이터랑 데이터를 보내기 위해 필요한 것들이 통합된 상태를 **프로토콜 데이터 유닛(Protocol Data Unit:PDU)** 이라고 한다. 즉 택배로 보내고 싶은 것이 데이터이고, 그것을 상자에 넣은 상태가 PDU이다.

### 캡슐화

OSI 모델에서는 7개의 계층을 7계층에서 1계층의 순서로 실행하는데, **계층이라는 단계를 실시할 때마다 거기에서 필요한 정보를 추가**할 수 있다는 것이다.

![Frame 2](https://user-images.githubusercontent.com/59480963/132225529-f8df020e-ef63-4393-ae59-714c1e9a8157.jpg)

메세지, 세그먼트, 데이터그램은 각 계층에서의 PDU의 호칭이다. 메세지에 4계층의 제어정보를 덧붙인 상태를 세그먼트 또는 데이터그램이라고 부른다. 3계층의 제어정보를 덧붙인 상태를 데이터그램이라고 부르는데 실제로는 그 앞에 프로토콜명을 붙여서 'TCP 세그먼트'라던가 'IP 데이터그램'이라고 부르는 것이 일반적이다. 또는 '4계층 PDU'처럼 계층 번호를 붙여서 부르는 경우도 있다. 이렇게 **데이터에 제어정보를 덧붙여서 PDU로 완성하는 것을 캡슐화(Encapsulation)** 라고 한다. 그리고 **수신한 쪽에서는 캡슐을 벗겨가게** 되는 것이다.

| 계층        | 호칭                                    | 내용                                          |
| ----------- | --------------------------------------- | --------------------------------------------- |
| 사용자      | 데이터(Data)                            | 송수신하고 싶은 데이터                        |
| 7~5계층 PDU | 메시지(Message)                         | 데이터를 통신용으로 변환한 것과 7계층 헤더    |
| 4계층 PDU   | 세그먼트(Segement) 데이터그램(Datagram) | 메시지와 4계층 헤더                           |
| 3계층 PDU   | 데이터그램(Datagram)                    | 세그먼트.데이터그램과 3계층 헤더              |
| 2계층 PDU   | 프레임(Frame)                           | 데이터그램과 2계층 헤더(2계층 꼬리부)         |
| 1계층       | 신호                                    | 프레임을 전송매체로 운반하기 위한 신호로 변환 |

> 3계층 PDU는 '패킷'이라고 부르는 경우도 있다. 다만 패킷은 PDU 자체를 가르키는 경우도 있어서 3계층 PDU는 데이터그램으로 칭한다.

<br />

이 캡슐화에서 추가되는 제어 데이터는 데이터 앞에 붙이면 **헤더(Header)** , 뒤에 붙이면 **꼬리부(Trailer)** 라고 부른다. 또한 헤더는 그 계층의 프로토콜명이나 계층의 번호를 붙여서 'TCP 헤더' 라든가 '4계층 헤더' 라는 식으로 부른다. 즉, 데이터에 7계층 헤더가 붙어서 메시지, 메시지에 4계층 헤더가 붙어서 세그먼트 또는 데이터그램이 되는 것이다.

> - 통신할 때 송신하는 것은 보내고 싶은 데이터 뿐만 아니라 제어용 정보도 필요하다.
> - 계층의 순서대로 헤더가 부가되어가는 것을 캡슐화라고 한다.
> - 수신한 쪽은 반대의 순서로 헤더를 벗겨서 데이터를 입수한다.

<br />

## 프로토콜

### 프로토콜이란?

**데이터 통신에 필요한 프로토콜은 한 개가 아니라 복수의 프로토콜로 이루어진다**. OSI 참조 모델 계층마다 각 계층의 역할을 하는 프로토콜이 존재하는 것이다. 하지만 너무 독립적이어서 상하 계층과 연결이 안되면 곤란하기 떄문에 완전히 제각각인 것은 아니다. 상위 계층 프로토콜이 하위 계층 프로토콜을 이용할 수 있는 구조를 가지고, 하위 계층 프로토콜이 상위 계층 프로토콜에 데이터를 전송할 수 있는 구조를 가질 필요가 있는 것이다. 이것이 **인터페이스**라는 구조이다.

인터페이스는 '중개역'이라는 의미인데 케이블과 컴퓨터의 중개역을 가르키기도 하지만, 프로토콜하고 프로토콜의 중개역을 가리키는 경우도 마찬가지로 인터페이스라는 말을 사용한다. 이렇게 상하 프로토콜에서 인터페이스를 결정해 둘 필요가 있다. 그 결과로 프로토콜 그룹이 되는 것이다.

프로토콜 그룹이란 완전히 분리된 것이 아니라 상위 프로토콜과 하위 프로토콜을 연결하는 인터페이스를 갖고있으면 7계층에서 1계층까지 연결된 프로토콜 그룹이 생기는 것을 **프로토콜군(Protocol Suite)** 이라고 부르는데 기본적으로는 어느 프로토콜군을 사용하는지에 따라 7계층에서 1계층까지 사용하는 프로토콜이 정해지는 것이다. 계층마다 프로토콜을 제멋대로 선택하는 것이 아니라 같은 프로토콜군 중에서 계층마다 사용하는 프로토콜이 정해지는 것이다. 즉, **데이터 통신은 같은 프로토콜군을 사용하는 컴퓨터나 기기끼리만 가능**한 것이다.

### 프로토콜이 결정하는 것

프로토콜은 데이터 통신의 규칙인데 거기에서 정해지는 것은 다양한다. 우선은 기본적으로 데이터 사용 방법, **어떤 헤더를 붙일지를 결정하는 것도 프로토콜의 역할**이다. 프로토콜에는 그 프로토콜이 있는 계층의 역할에 따른 기능이 있고 또 그것을 실현하기 위한 정보로서 헤더를 붙인다. 이 헤더의 내용은 프로토콜로 정해져 있는 것이다.

그 밖에 A라는 데이터를 보내면 받은 쪽에서는 B라는 데이터를 보낸다는 식으로**데이터를 주고받는 순서**도 프로토콜로 정해진다. 현재의 상태를 전하는 것, 에러의 수정, 사용 설정을 위한 협의 같은 것도 있다.

데이터 통신을 하는 컴퓨터와 기기는 동일한 프로토콜군을 사용해야만 한다. 이런 프로토콜군을 통일하려 한 것이 ISO인데, OSI 참조 모델에 따라서 몇 개의 프로토콜을 제정했다. 이것이 OSI 표준 프로토콜군이라고 불리는 프로토콜군이다. 결국 이것은 실패했지만 현재 이 OSI 프로토콜을 대신해 가장 많이 사용되는 것이 **TCP/IP** 프로토콜군인데 이게 **인터넷에서 사용되는 프로토콜군**이다.

인터넷이 발전하게 되면서 이 TCP/IP 프로토콜군이 현재의 데이터 통신의 표준 프로토콜, 즉 **사실표준(De Facto Standard)** 프로토콜이 된 것이다. '표준'은 제정된 규격을 말하는 것인데, TCP/IP 프로토콜군을 사용하는 컴퓨터 및 기기가 압도적으로 많아서 실제로 제정된 표준규격은 아니지만 표준규격처럼 사용할 수 밖에 없는 상태가 된 것을 말한다.

> - 계층마다 존재하는 프로토콜 그룹을 프로토콜군이라고 한다.
> - 프로토콜은 '데이터의 내용을 결정'하고, '헤더를 결정'하고, '송수신 순서를 결정'한다.
> - 사실표준으로써 TCP/IP 프로토콜군이 사용된다.

<br />

## TCP/IP

### TCP/IP 모델

TCP/IP는 IETF(the internet Engineering Task Force)라는 '국제인터넷표준화기구'가 제정했다. 여기에서 제정하는 문서는 RFC(Request For Comments)라고 불리는 규격이 된다. 이 IETF의 RFC에 의해 정해져 있는 것이 TCP/IP 프로토콜군이고 이것들은 TCP/IP 모델이 베이스가 된 것이다. OSI 참조 모델이라는 '단계와 순서의 설계도'에 따라 OSI 표준 프로토콜군이 정해진 것처럼 TCP/IP 모델에서 TCP/IP 프로토콜군이 만들어지는 것이다.

| TCP/IP 모델 |                  | OSI 참조 모델 |                |
| ----------- | ---------------- | ------------- | -------------- |
| 4계층       | 애플리케이션계층 | 7계층         | 응용계층       |
| 4계층       | 애플리케이션계층 | 6계층         | 표현계층       |
| 4계층       | 애플리케이션계층 | 5계층         | 세션계층       |
| 3계층       | 트랜스포트계층   | 4계층         | 전송계층       |
| 2계층       | 인터넷계층       | 3계층         | 네트워크계층   |
| 1계층       | 인터페이스계층   | 2계층         | 데이터링크계층 |
| 1계층       | 인터페이스계층   | 1계층         | 물리계층       |

OSI 참조 모델은 OSI 표준 프로토콜을 만들기 위한 설계도이기 때문에 TCP/IP 프로토콜군에는 아무런 영향이나 관계가 없다. 다만, '데이터 통신'이라는 관점에서 생각할 때 그저 비슷한 모델이라는 얘기인 것이다. 예를 들어 OSI 참조 모델의 3계층하고 TCP/IP 모델의 인터넷계층은 비슷하지만 동일하지는 않다.

### TCP/IP 프로토콜군

TCP/IP 모델로 만들어지는 TCP/IP 프로토콜군은 다양한 프로토콜이 제정되어있는 것 뿐만 아니라, 인터넷 발전과 기술향상에 따라 지금도 계속 새로운 프로토콜이 만들어지고 있다.

|       |                  |                                 |
| ----- | ---------------- | ------------------------------- |
| 4계층 | 애플리케이션계층 | HTTP / FTP / SMTP 등            |
| 3계층 | 트랜스포트계층   | TCP / UDP                       |
| 2계층 | 인터넷계층       | IP / ARP                        |
| 1계층 | 인터페이스계층   | 이더넷 / 프레임 릴레이 / PPP 등 |

> 인터페이스계층의 '이더넷' 등은 정확히 말하면 TCP/IP 프로토콜군이 아니다. 단지 TCP/IP 프로토콜군이 이들 인터페이스계층의 프로토콜을 이용할 수 있다는 의미이다.

트랜스포트계층의 TCP와 인터넷계층의 IP가 프로토콜군의 핵심적인 존재로 사용되는 TCP/IP라는 2개의 프로토콜군에서 이름이 지어진 것이다.

> - TCP/IP 모델에서 TCP/IP 프로토콜군이 제정되었다.
> - TCP/IP 모델은 4개의 계층으로 이루어진다.

<br />

OSI 참조 모델이라는 설계도에 따라 '프로토콜'이라는 통신상의 규칙이 정해지고 그것에 따라서 데이터 통신이 실행된다. 이것은 '네트워크에서 어떤 순서로 통신할지'하는 얘기로 이어지게 된다. 파이프랑 기기 배치에 의한 '구축', 모델과 프로토콜에 의한 '순서' 둘 다 중요하기 때문에 어느 한쪽만 없어도 네트워크로써 동작하지 않는다.

### 네트워크의 구축과 순서

#### 네트워크의 형태

| 항목        | 종별                                                    |                                                              |
| ----------- | ------------------------------------------------------- | ------------------------------------------------------------ |
| 회선 연결법 | 회선을 바꾸어 연결하는 **회선교환**                     | 패킷을 개별적으로 보내는 **패킷교환**                        |
| 회선의 분배 | 도중에 분해해서 복수로 연결되는 **멀티액세스 네트워크** | 분배하지 않고 1:1로만 연결되는 **포인트 투 포인트 네트워크** |
| 규모와 형태 | 자비로 부설하는 구내 한정 네트워크 **LAN**              | 통신사업자의 통신 서비스를 빌린 광범위 네트워크 **WAN**      |

<br />

#### 기본적인 패킷 교환 네트워크의 구성

![Frame 3](https://user-images.githubusercontent.com/59480963/132932248-a4d2d8c5-aea4-4287-9186-123cb99d7d6b.jpg)

<br />

#### OSI 참조 모델

|         |                |                                             |          |
| ------- | -------------- | ------------------------------------------- | -------- |
| 제7계층 | 응용계층       | 사용자에게 네트워크 서비스를 제공한다.      | 내용표현 |
| 제6계층 | 표현계층       | 데이터의 형식을 결정한다.                   | 내용표현 |
| 제5계층 | 세션계층       | 데이터의 송수신의 순서 등을 관리한다.       | 내용표현 |
| 제4계층 | 전송계층       | 신뢰성이 높은(에러가 적은) 전송을 시행한다. | 전송물   |
| 제3계층 | 네트워크계층   | 전송 규칙과 수신처를 결정한다.              | 전송물   |
| 제2계층 | 데이터링크계층 | 인접기기 사이의 데이터 전송을 제어한다.     | 전송     |
| 제1계층 | 물리계층       | 전기.기계적인 부분의 전송을 시행한다.       | 전송     |

- 프로토콜: 통신을 실시하기 위한 규칙. 계층마다 그 역할을 하는 프로토콜이 있다. 모델과 일치하는 복수의 프로토콜을 프로토콜군이라고 부른다.
- 캡슐화: 각 계층에서 상위 계층에서 오는 데이터에 그 역할을 수행하기 위해 필요한 제어정보를 추가해 간다. 이것은 프로토콜로 결정되어 있다.

<br />
<br />
<br />

##### 출처

- [하루3분 네트워크 교실](http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&ejkGb=KOR&linkClass=&barcode=9788931454727)
