# 버튼에 기능 추가 & state 변경

기본적으로 state를 만들어야 할 땐 `useState(넣을 데이터)`하면 되고, 그 state 명을 원하는 곳에 적으면 된다.
state는 그냥 변경할 수 없다.

간단하게 좋아요 버튼을 누르면 옆에 숫자가 1씩 증가하는 기능을 만들어보자.
```jsx
// 좋아요 버튼 만들기
let [좋아요, 좋아요변경] = useState(0);

<span onClick={ ()=> {} }>💙</span> {좋아요}
```

버튼의 기능을 만들땐 `onClick={클릭될 때 실행할 함수}` 혹은 `onClick={() => {실행할 내용}}`을 넣어주면 된다.

주의할 점
1. Click이 카멜케이스로 작성된다.
2. 따옴표가 아니라 {} 중괄호를 사용한다.
3. 그냥 코드가 아니라 함수를 적는다.

💙 버튼을 눌렀을 때 `{좋아요}`라는 state가 변경되려면 `useState`를 이용할 때 만들었던 `좋아요변경`이라는 함수를 사용하면 된다. `좋아요변경`은 좋아요를 변경시켜주는 함수이다. 예를 들어 `좋아요변경(10)`을 하면 좋아요가 10으로 바뀐다.

```jsx
let [좋아요, 좋아요변경] = useState(0);

<span onClick={ ()=> {좋아요변경(좋아요 + 1)} }>💙</span> {좋아요}
```
`좋아요`라는 기존의 state에 1을 더한 값을 `좋아요변경` 함수에 넣으면 버튼을 누를 때 마다 그 값으로 대체된다.


<br />

### 버튼에 제목변경 기능 만들기
버튼을 누르면 첫 번째 글 제목이 Changed title로 바뀌는 기능을 만든다고 가정해보자. 

useState 값을 변경할 때는 state 변경 함수를 사용해서 변경해야한다. 이때 state 변경 함수들은 state를 아예 대체할 수 있다. 따라서 `글제목변경(['Changed title', 'LOVE', 'STUDY'])`처럼 하드코딩해도 된다. 
```jsx
function App() {
  let [글제목, 글제목변경] = useState(['W.I.P', 'LOVE', 'STUDY'])

  function 글제목바꾸기() {
    const 새로운글제목 = [...글제목];
    새로운글제목[0] = 'Changed title';
    글제목변경(새로운글제목);
  }

  return(
    <>
      <button>글제목바꾸기버튼</button>
      <h3>{글제목}</h3>
    </>
  )
}
```
하지만 배열의 갯수가 1억개가 된다면 찾아서 수정하는 것은 매우 힘들기 때문에 모든 배열을 **deep copy**로 가져온 후 변경하는 것이 좋다. 

<br />

> 자바스크립트 내에서 arrat나 object 자료형은 = 등호로 복사하면 각각 별개의 자료형이 생성되는 것이 아니라 값을 공유하게 된다.
> ```js
> var data1 = [1, 2, 3];
> var data2 = data1;
> ```
> 이런 식으로 사용하게 되면 data1과 data2는 각각 별개로 저장하는 것이 아니라 data1과 data2는 같은 값을 공유하게 된다. data1을 변경하면 data2도 변경된다.
> 
> 따라서 완전히 개별 복사본을 만들어주는 copy를 해야하는데 가장 쉬운 방법은 deep copy라고 불리며, `var newArray = [...originalArray]` 이렇게 사용한다.

### spread 연산자 (ES6)
간단히 말해 배열이나 객체에 사용하는 연산자로 **중괄호나 대괄호를 벗겨달라**는 뜻이다. `...[1, 2, 3]` 이렇게 사용하면 그 자리에 `1, 2, 3`이 남는다. 

spread 연산자의 더 중요한 용도는 **deep copy**할 때이다.
```jsx
var data1 = [1, 2, 3];
var data2 = [...data1];
```
이렇게 사용하게 되면 data1에 있던 자료들의 괄호를 벗긴다음에 다시 array로 만들어 달라는 건데, 이렇게 사용하면 data1과는 완전히 독립적인 array 복사본 생성이 가능해진다. (객체도 마찬가지) 

<br />

### 요약
1. 클릭 이벤트를 만들고 싶다면 `onClick={함수}`를 사용한다.
2. state를 변경할 땐, state 변경함수를 사용한다.
3. 변경하고 싶은 state를 deep copy로 복사한 뒤 복사본을 수정해서 state변경함수()에 넣는다. 

<br />
<br />
<br />

##### 출처
- [코딩애플](https://online.codingapple.com/unit/react4-setstate-usestate-onclick-eventhandler/?id=2305)