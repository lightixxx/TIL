# 모던 JavaScript와 개발 환경

<br />

## 급변한 프론트엔드 개발 환경

ES2015 버전부터 보통 현대적인 "새로운 JavaScript 버전이겠구나"라고 생각할 수 있고 통상적으로 그렇게 생각을 하지만, 사실상 정답은 없다.

ES2015 버전부터 프론트엔드 개발환경이 급격하게 달라진 것은 아니다. 역사적으로는 ES2015 버전이 나오기 전부터 프론트엔드의 개발 환경은 급변했다. 대표적인 이유는 nodejs 때문에 그렇다. nodejs와 npm으로 이루어지는 생태계 변화, 그리고 제공되는 툴, 툴을 이용한 환경의 변화들 때문에 프론트엔드 개발 환경은 급변했다.

물론 급변하는 과정에서 여러 제안들이 등장했고, 그 제안들이 실제로 표준에 합류하면서 지금의 개발 환경을 만들었다고 할 수 있다. 그런데 이 과정들이 대략 10년 정도에 걸쳐서 이루어졌는데, 엄청난 변화들이 그 안에 포함되어 있다.

핵심적으로 '어떤 부분들이 그 변화를 일으키는데 주된 요소로 작용했는가' 라고 하는 측면들을 모르면, 막연히 프론트엔드 개발환경은 너무 복잡하고 배워야 할 게 너무 많고, 왜 이렇게 복잡하게 되어 있는지 스트레스를 받게 되는 상황까지 올 수 있다. 모르고 스트레스를 받는 것 보다는 '왜 이렇게 되어야만 하는지'에 대한 부분들을 이해하면 복잡한 프로젝트 세팅과 환경 설정과 같은 부분에 스트레스를 덜 받을 수 있다.

프론트엔드 개발환경이 복잡해진 이유는 굉장히 여러 가지가 있다. 그 원인을 모두 알 필요는 없고, 핵심적인 원인 한 가지만 알면 된다. 그것은 바로 **웹앱의 규모가 굉장히 커지고 복잡해졌다는 것**이다. 웹애플리케이션의 규모라고 하면 보통 생각하는 그 상상 이상보다도 엄청 클 수 있다.

소프트웨어 하나를 만든다고 하면 규모가 큰 소프트웨어 하나의 코드는 수십만 라인에서 수백만 라인, 혹은 그 이상이 될 수도 있다. 코드의 규모도 그렇지만 그 코드가 하나의 파일에 다 들어가 있을 수 없기 때문에 수백, 수천 개의 파일이 단 하나의 애플리케이션을 위한 파일이 된다.

JavaScript 역사와 관련해서 아주 초기에 브라우저 안에서 HTML을 조작하기 위한 정도의 가벼운 역할로 시작된 언어가 JavaScript 였다. JavaScript 언어는 아주 간단한 일을 하기 위해서 만들어진 프로그래밍 언어였다. 언어의 디자인 자체가 이렇다 보니 실제로 수만 개의 소스 코드를 갖고 하나의 애플리케이션을 만들기 위해서 필요한 여러 가지 기능들이 하나도 준비가 되어 있지 않았다.

<br />

## 모듈

하나의 애플리케이션을 만드는 데 있어서 수십 개, 수만 개의 파일을 가지고 만들 수도 있어야 한다고 했을 때 필요한 스펙이라고 한다면 대부분의 프로그래밍 언어가 지원하고 있는 **모듈** 이라고 하는 스펙이다.

기존 JavaScript는 모듈이라고 하는 스펙이 없었다. ES2015부터 모듈 스펙을 지원하기 시작했다. 모듈은 간단하게 말하면 파일과 파일 간에 특정 파일의 어떤 기능을 사용하기 위해서 불러들여서 쓸 수 있는 기능이라고 생각하면 아주 간단하다. JavaScript에서는 import와 export라고 하는 문법으로 지원한다.

모듈이 프론트엔드 개발환경을 복잡하게 만드는 원인이 된 이유는 실제로 JavaScript가 실행되는 방식을 살펴보면 알 수 있다. HTML안에 반드시 스크립트 태그를 이용해서 JavaScript 코드의 위치를 지정하게 되어 있다. 그리고 그 스크립트 태그가 바로 JavaScript 파일을 로딩하는(불러들이는) 역할을 하는 태그이다. 문제는 파일들이 여러 개가 있다면 스크립트 태그는 그만큼 작성해야 한다. 왜냐하면 JavaScript 파일을 불러들이는 방법은 스크립트 태그밖에 없었기 때문이다.

앞서 말한 JavaScript를 불러들인다고 하는 의미는 JavaScript 코드 안에서 다른 JavaScript 파일을 불러들인다는 것이다. 스크립트 태그라고 하는 것은 JavaScript 파일 안에 있는 게 아니라 HTML 코드 안에 존재하기 때문에 실제로 모듈 스펙이라고 부르기는 힘들다.

그렇다고 하면 스크립트 태그로 불러들이는 게 아니라 JavaScript 파일의 코드 안에서 다른 JavaScript 파일을 불러 쓸 수 있는 import, export라는 문법이 생겼는데, 실제로 이 문법을 그대로 사용하기에 어려운 현실적인 문제가 2가지 존재한다.

<br />

## 브라우저 호환성

첫 번째 이유는 '브라우저 호환성 이슈'이다. 웹 프론트엔드 개발자들이 제일 먼저 새로운 기술들을 적용할 때, 먼저 떠오르는 것은 브라우저 호환성이다. 웹은 누구에게나 공평하고 또 서비스를 하는 입장에서는 사용자가 어떤 브라우저의 어떤 버전을 쓸지를 강제하기 어렵기 때문이다. 따라서 웹 프론트엔드 개발자 혹은 웹 개발자들은 브라우저 호환성을 최대한 넓게 가져가는 것을 중요하게 생각한다. 예를 들어 모듈 스펙에 사용되는 import, export 문법은 IE에서는 아예 지원하지 않는다.

두 번째 이유는 '최신 문법을 사용하고 싶다'고 하는 측면이다. 여기서도 브라우저 호환성은 더 크게 문제가 된다. 2015년에 나온 import, export만 해도 문제가 많은데, 16, 17, 18년 등 에 나온 기능은 더더욱 호환성에 문제가 있다. 이런 문제들을 해결하기 위해서 엔지니어링이 시도가 된다.

JavaScript 개발자들이 JavaScript를 갖고 다양한 툴들을 만들기 시작했다. npm이라는 게 생겼기 때문에 그 툴들을 만들고 배포하기 더욱 쉬워졌다. npm을 통해서 내가 만든 애플리케이션을 등록해 놓으면 다른 개발자들이 npm을 통해서 검색해 보고 바로 설치해서 프로젝트에 불러다 쓰기가 손쉬워졌기 때문이다. 이런 환경이 만들어진 상황에서 **번들러**라고 하는 소프트웨어가 세상에 나왔다.

<br />

## 번들러

'번들러'라고 하는 소프트웨어가 하는 일은 굉장히 간단하다. 기본적으로 시작되는 js파일 하나를 지정하면 모듈이라고 하는 스펙을 이용해서 그 js파일 안에서 다른 js파일을 부를 수 있다. 다른 js파일을 부르는 것들을 구문 해석해서 그렇게 불리는 js코드를 하나의 파일로 만들어 주는 것이 번들러라고 하는 소프트웨어가 하는 일이다. 브라우저에서 실제로 js 파일을 불러들이기(로딩하기) 전에, 그 많은 파일을 몇 개가 됐은, 하나의 파일로 만들어준다. HTML 내에서는 그 하나 만들어진 파일만 스크립트 태그에 연결해 놓으면 모든게 해결이 된다. 번들러가 하나의 파일로 만들어놨기 때문에 가능한 일이다.

번들러라고 하면 여러가지 도구가 존재한다. 실무적으로 가장 많이 쓰이는 도구는 Webpack이라고 하는 번들러이다.

<img width="829" alt="스크린샷 2022-01-24 오후 8 29 07" src="https://user-images.githubusercontent.com/59480963/150775186-cd365164-8672-4d2c-971e-bb20873ae995.png">

- [출처 - Webpack](https://webpack.js.org/)

Webpack 사이트에 가보면 js파일이 아닌 다양한 유형의 파일들(sass, png, jpg, hbs 등)도 입력으로 받고 있다는 것을 볼 수 있다. 번들링 된 후 아웃풋을 보면 js뿐만 아니라 css, jpg, png 라고 하는 파일도 아웃풋으로 나오고 있다. 여러 개의 js파일을 하나로 합치는 소프트웨어를 만들어 놓고 보니, 더 다양한 일을 할 수 있을 것 같아서 필요없는 소스 코드 제거, 이미지 최적화, 어글리파이 등 다양한 기능들이 추가됐다. 이런 많은 작업들을 번들러들이 손쉽게 처리할 수 있게끔 다양한 기능들을 제공하게 되었다. 기능 자체가 다양해지다 보니 자연스럽게 사용법 또한 점점 복잡해졌다.

번들러가 하는 일 중 가장 중요한 일은 '트렌스 파일링'이다. 개발자들이 코드를 작성할 때 코드는 컴퓨터가 실행하게 되지만, 컴퓨터는 보통 JavaScript, C, Java 등의 프로그래밍 언어를 이해하지 못한다. 인간이 이해할 수 있는 언어로 작성된 프로그램 코드를 기계가 읽고 실행할 수 있는 언어 즉, 기계어로 바꾸는 작업들이 필요하다. 이 컨셉에 착안해서 브라우저가 이해할 수 있는 프로그래밍 언어는 JavsScript 뿐인데 만약 JavaScript가 쓰기 싫다면, 원하는 프로그래밍 언어로 개발을 하고 JavaScript로 변환시키는 방법도 생겨났다.

더 나아가서 개발자들은 JavaScript 최신 스펙으로 개발하고 싶어하지만 브라우저의 호환성때문에 사용할 수 없었던 문제들도 프랜스 파일러를 이용하면 해결할 수 있겠다는 생각을 하게 됐다. 최신 스펙의 JavaScript로 개발을 하고 브라우저 호환성에 안정적인 구버전의 JavaScript로 트랜스 파일링을 해주는 트랜스 파일러가 바로 'Babel'이다.

번들러가 여러 개의 js파일을 하나의 파일로 만드는 과정에 이 트랜스 파일러를 끼워 넣어서 코드 압축을 하거나 어글리파이 하듯이, 최신 버전의 문법을 하위 버전의 문법으로 바꾸는 일들까지 하게 됐다. 그래서 실제 번들러가 하는 역할 중에 가장 중요한 것 중 하나는 트랜스 파일러가 중간에 끼어 있는 것이 되었다.

또한 TypeScript도 JavaScript가 아니기 때문에 브라우저에서 실행될 수 없다. 따라서 TypeScript가 제공하는 트랜스 파일러를 이용해서 원하는 JavaScript 버전으로 바꿀 수 있는 즉, 트랜스 파일링 동작이 일어나는 것이다. TypeScript도 트랜스 파일러의 한 종류라고 할 수 있다. 이렇듯 트랜스 파일링 혹은 번들링이라고 하는 것에서 시작된 변환기, 혹은 변환시킬 수 있다고 하는 프로세스가 생기면서 JavaScript의 한계를 뛰어넘어 웹 프로그래밍을 하는 데 있어서 다양하게 활용될 수 있다는 것은 흥미로운 일이다. 배워야 할 것이 많아진 것은 확실하지만 규모가 큰 애플리케이션을 만들 때 이런 도구들이 많아지는 것은 확실히 반가운 일이다.

<br />

#### 출처

- [패스트캠퍼스 JavaScript & TypeScript Essential](https://fastcampus.co.kr/dev_academy_kmt1)
